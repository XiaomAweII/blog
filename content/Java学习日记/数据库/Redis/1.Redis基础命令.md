---
title: Redis基础命令
tags:
  - 缓存数据库
  - Redis
---

# Redis简介

Redis(Remote Dictionary Server)是由Salvatore Sanfilippo开发的ket-value缓存数据库

Redis是开源的, 遵守BSD协议,使用ANSI C语言开发

Redis与其它key/value缓存产品有以下三个特点

1. Redis支持数据的持久化, 可以将内存中的数据保存在磁盘中, 重启的时候可以再次加载使用;
2. Redis不仅支持key-value类型的数据, 还提供list, set, zset, hash等数据结构的存储
3. Redis支持数据的备份, 即`master-slave`模式的数据备份

## Redis 优势

1. **高性能:**Redis能读的速度是110000次/s,写的速度是81000次/s;
2. **丰富的数据类型:**Redis支持Strings, Lists, Hashes, Sets及OrderedSets数据类型操作;
3. **原子型操作:**Redis的所有操作都是原子性的, 还支持对几个操作全并后的原子性执行;
4. **丰富的特性:**Redis支持publish/subscribe, 通知, key过期等等特性;

## Redis与其他key-value存储有什么不同?

1. Redis支持更多的数据类型, 并且提供对这些数据类型的原子性操作;
   Redis的数据类型都是基于基本数据结构的同时对程序员透明, 无需进行额外的抽象;
2. Redis的数据可以持久化到磁盘;
   > 所以在对不同数据集进行告诉读写时需要权衡内存, 因为数据量不能大于硬件内存.

# Redis 安装

## Windows安装Redis

1. 下载 Redis for Windows：
   - 访问 https://github.com/microsoftarchive/redis/releases
   - 下载最新版本的 ZIP 文件
2. 解压文件我们: 下载 Redis-x64-xxx.zip 压缩包到 C 盘，解压后，将文件夹重新命名为 redis
3. 打开一个 cmd 窗口 使用 cd 命令切换目录到 C:\redis 运行 `redis-server.exe redis.windows.conf` 可以把redis 的路径加到系统的环境变量里，这样就省得再输路径了redis.windows.conf 可以省略，如果省略，会启用默认的。

另启一个cmd窗口, 原来的不要关闭, 不然就无法访问服务端了

切换到redis目录下运行

```bash
redis-cli.exe -h 127.0.0.1 -p 6379
```

设置键值对

```bash
127.0.0.1:6379 > set name zhangsan
OK
```

取出键值对

```bash
127.0.0.1:6379 > get name
"zhangsan"
```

## Ubuntu安装Redis

1. 首先, 确保系统已经安装了必要的编译工具

```bash
sudo apt-get update
sudo apt-get install build-essential tcl
```

2. 下载最新的Redis稳定版本

```bash
wget https://download.redis.io/releases/redis-7.2.3.tar.gz
```

3. 解压下载的文件

```bash
tar xzf redis-7.2.3.tar.gz
```

4. 进入Redis目录

```bash
cd redis-7.2.3
```

5. 编译Redis

```bash
make
```

6. 可选）运行测试以确保一切正常

```bash
make test
```

7. 安装Redis到系统

```bash
sudo make install
```

8. 创建Redis配置目录和数据目录

```bash
sudo mkdir /etc/redis
sudo mkdir /var/redis
```

9. 复制默认配置文件到配置目录

```bash
sudo cp redis.conf /etc/redis/redis.conf
```

10. 编辑配置文件（根据需要）

```bash
sudo vi /etc/redis/redis.conf
```

主要修改：

- 将 daemonize 设置为 yes（使 Redis 作为守护进程运行）
- 设置 dir 到 /var/redis（数据目录）

11. 创建一个 systemd 服务文件以便于管理 Redis

```bash
sudo vi /etc/systemd/system/redis.service
```

**添加以下内容**

```bash
[Unit]
Description=Redis In-Memory Data Store
After=network.target

[Service]
User=redis
Group=redis
ExecStart=/usr/local/bin/redis-server /etc/redis/redis.conf
ExecStop=/usr/local/bin/redis-cli shutdown
Restart=always

[Install]
WantedBy=multi-user.target
```

12. 创建Redis用户和组

```bash
sudo adduser --system --group --no-create-home redis
```

13. 设置适当的权限

```bash
sudo chown redis:redis /var/redis
sudo chmod 770 /var/redis
```

14. 启动 Redis 服务

```bash
sudo systemctl start redis
```

15. 设置 Redis 开机自启

```bash
sudo systemctl enable redis
```

16. 验证 Redis 是否正在运行

```bash
sudo systemctl status redis
```

17. 使用Redis客户端测试连接

```bash
redis-cli
127.0.0.1:6379> ping
PONG
127.0.0.1:6379> set test "Hello, Redis!"
OK
127.0.0.1:6379> get test
"Hello, Redis!"
127.0.0.1:6379> exit
```

## CentOS安装Redis

1. 首先, 更新系统并安装必要的依赖

```bash
sudo yum update
sudo yum install gcc make tcl
```

2. 下载最新的 Redis 稳定版本

```bash
wget https://download.redis.io/releases/redis-7.2.3.tar.gz
```

3. 解压下载的文件

```bash
tar xzf redis-7.2.3.tar.gz
```

4. 进入Redis目录

```bash
cd redis-7.2.3
```

5. 编译 Redis

```bash
make
```

6. 安装Redis

```bash
sudo make install
```

7. 创建 Redis 配置目录和数据目录

```bash
sudo mkdir /etc/redis
sudo mkdir /var/lib/redis
```

8. 复制默认配置文件到配置目录

```bash
sudo cp redis.conf /etc/redis/
```

9. 编辑配置文件

```bash
sudo vi /etc/redis/redis.conf
```

主要修改：

- 将 daemonize 设置为 no
- 设置 dir 到 /var/lib/redis

10. 创建systemd服务文件

```bash
sudo vi /etc/systemd/system/redis.service
```

添加以下内容

```bash
[Unit]
Description=Redis In-Memory Data Store
After=network.target

[Service]
User=redis
Group=redis
ExecStart=/usr/local/bin/redis-server /etc/redis/redis.conf
ExecStop=/usr/local/bin/redis-cli shutdown
Restart=always

[Install]
WantedBy=multi-user.target
```

11. 创建Redis用户和组

```bash
sudo adduser --system --no-create-home redis
sudo groupadd redis
sudo usermod -aG redis redis
```

12. 设置适当的权限

```bash
sudo chown redis:redis /var/lib/redis
sudo chmod 770 /var/lib/redis
```

13. 启动 Redis 服务

```bash
sudo systemctl start redis
```

14. 设置 Redis 开机自启

```bash
sudo systemctl enable redis
```

15. 验证Redis是否正在运行

```bash
sudo systemctl status redis
```

16. 如果需要，配置防火墙

```bash
sudo firewall-cmd --permanent --add-port=6379/tcp
sudo firewall-cmd --reload
```

# Redis 配置

Redis 提供了很多配置选项来优化Redis服务
Redis 的配置文件位于 Redis 安装目录下, 文件名为 redis.conf
可以通过 Redis CONFIG 命令查看或设置配置项

## Redis CONFIG GET 命令语法格式

Redis CONFIG GET 命令语法格式如下

```bash
CONGIG GET CONFIG_SETTING_NAME
```

### 范例

```bash
127.0.0.1:6379> CONFIG GET loglevel
1) "loglevel"
2) "notice"
```

可以使用 \* 号获取所有的 Redis 配置

```bash
127.0.0.1:6379> CONFIG GET *
```

## 编辑配置

可以通过修改redis.conf文件或使用CONFIG set命令来修改配置

### Redis CONFIG SET 命令

Redis CONFIG SET 命令用来设置配置选项

### Redis CONFIG SET 语法

```bash
CONFIG SET CONFIG_SETTING_NAME NEW_CONFIG_VALUE
```

### 范例

```bash
127、0.0.1:6379> CONFIG SET loglevel "notice"
OK
127、0.0.1:6379> CONFIG GET loglevel

1) "loglevel"
2) "notice"
```

# Redis redis.conf 配置选项

Redis 提供了很多配置选项来优化 Redis 服务
Redis 的配置文件位于 Redis 安装目录下, 文件名为 redis.conf

## Redis 配置参数说明

Redis 配置文件 redis.conf 配置说明如下

### 1. daemonize

Redis默认不是以守护进程的方式运行, 可以通过该配置项修改, 使用yes启用守护进程

```bash
# daemonize yes|no
daemonize yes
```

### 2. pidfile

Redis 以守护进程方式运行时, Redis默认会把pid写入`/var/run/redis.pid`文件, 可以通过pidfile项指定

```bash
pidfile /var/run/redis.pid
```

### 3. port

指定 Redis 监听端口, 默认端口为 6379

> 6379的典故:
> Redis 作者曾经解释了为什么选用6379作为默认端口
> 因为6379在手机按键上MERZ对应的号码, 而MERZ取自意大利歌女Alessia Merz的名字

```bash
port 6379
```

### 4. bind

绑定的主机地址

```bash
bind 127.0.0.1
```

### 5. timeout

设置客户端闲置多长时间后关闭连接, 如果指定为0, 表示关闭该功能

```bash
timeout 300
```

### 6. loglevel

指定日志记录级别
Redis支持四个级别: debug, verbose, notice, warning, 默认为verbose

```bash
loglevel verbose
```

### 7. logfile

日志记录方式, 默认为标准输出
如果配置Redis为守护进程方式运行, 而这里又配置为日志记录方式为标准输出, 则日志将会发送给/dev/null

```bash
logfile stdout
```

### 8. databases

设置数据库的数量, 默认数据库为0
可以使用SELECT命令在连接上指定数据库id

```bash
database 16
```

### 9. save

指定在多长时间内, 有多少次更新操作, 就将数据同步到数据文件, 可以多个条件配合

```bash
save <seconds> <changes>
```

Redis 默认配置文件中提供了三个条件

```bash
save 900 1      # 表示 900 秒 ( 15分钟 ) 内有 1 个更改
save 300 10     # 表示 300 秒 ( 5分钟 ) 内有 10 个更改
save 60 10000   # 表示 60  秒内有 10000 个更改
```

### 10. rdbcompression

指定存储至本地数据库时是否压缩数据, 默认为yes
Redis采用LZF压缩, 如果为了节省CPU时间, 可以关闭该选项, 但会导致数据库文件变得巨大

```bash
rdbcompression yes
```

### 11. dbfilename

指定本地数据库文件名, 默认值为 dump.rdb

```bash
dbfilename dump.rdb
```

### 12. dir

指定本地数据库存放目录

```bash
dir ./
```

### 13. slaveof

当本机为slave服务时, 设置master服务的IP地址及端口
在Redis启动时, 它会自动从master进行数据同步

```bash
slaveof <masterip> <masterport>
```

### 14. masterauth

当master服务设置了密码保护时, slave服务连接master的密码

```bash
masterauth <master-passeord>
```

### 15. requirepass

设置Redis连接密码, 默认关闭

如果配置了密码, 客户端在连接Redis时需要需要通过AUTH`<password>`提供密码

```bash
requirepass <require-password>
```

### 16. maxclients

设置同一时间最大客户端连接数, 默认无限制

Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数
如果设置`maxclients 0`, 表示不作限制
当客户端连接数到达限制时, Redis会关闭新的连接并向客户端返回max number of clients reached错误信息

```bash
maxclients 128
```

### 17. maxmemory

指定Redis 最大内存限制

Redis 在启动时会把数据加载到内存中，达到最大内存后，Redis 会先尝试清除已到期或即将到期的 Key

当此方法处理后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。

Redis 新的 vm 机制，会把 key 存放内存，value 会存放在 swap 区

```bash
maxmemory <bytes>
```

### 18. appendonly

指定是否在每次更新操作后进行日志记录，默认为 no

Redis 在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失

因为Redis 本身同步数据文件是按上面 save 条件来同步的，所以有的数据会在一段时间内只存在于内存中

```bash
appendonly no|yes
```

### 19. appendfilename

指定更新日志文件名, 默认为appendonly.aof

```bash
appendfilename appendonly.aof
```

### 20. appendfsync

指定更新日志条件, 默认为everysec

```bash
appendfsync everysec
```

日志条件共有3个可选值:

- no:表示等操作系统进行数据缓存同步到磁盘(快)
- always:每次更新操作后手动调用fsync()将数据写到磁盘(慢,安全)
- everysec:每秒同步一次(折中,默认值)

### 21. vm-enabled

指定是否启用虚拟内存机制, 默认值为no

```bash
vm-enabled no
```

VM机制将数据分页存放，由 Redis 将访问量较少的页即冷数据 swap 到磁盘上，访问多的页面由磁盘自动换出到内存中

### 22. vm-swap-file

虚拟内存文件路径, 默认值为`/tmp/redis.swap`不可多个Redis实例共享

```bash
vm-swap-file /tmp/redis.swap
```

### 23. vm-max-memory

将所有大于vm-max-memory的数据存入虚拟内存

```bash
vm-max-memory 0
```

无论vm-max-memory设置多小, 所有索引数据都是内存存储的, 当vm-max-memory设置为0的时候,其实所有value都存在于磁盘, 默认值为0

Redis的索引数据就是keys

### 24. vm-page-size

vm-page-size是要根据存储的数据大小来设定的

```bash
vm-page-size 32
```

Redis swap文件分成了很多的page, 一个对象可以保存在多个page上面, 但一个page上不能被多个对象共享,

Redis建议如果存储很多小对象, page大小最好设置为32或者64bytes;如果存储很大的对象, 则可以使用更大的page,如果不稳定, 就是用默认值

### 25. vm-pages

设置swap文件中的page数量

```bash
vm-pages 134217728
```

页表(一种表示页面空闲或使用bitmap)是放在内存中的,在磁盘上每8个pages将消耗1byte的内存

### 26. vm-max-threads

设置访问swap文件的线程数,默认值为4

```bash
vm-max-threads 4
```

最好不要超过机器的核数
若设置为0, 所有对swap文件的操作都是串行的, 可能会造成长时间的延迟

### 27. glueoutputbuf

设置在向客户端应答时, 是否把较小的包合并为一个包发送, 默认为开启(yes)

```bash
glueoutputbuf yes
```

### 28. hash-max-zipmap和hash-max-zipmap-value

指定在超过一定的数量或者最大的元素超过某一临界值, 采用特殊的哈希算法

```bash
hash-max-zipmap-entries 64
hash-max-zipmap-value 512
```

### 29. activerehashing

指定是否激活重置哈希, 默认为开启(yes)

```bash
activerehashing yes*
```

### include

指定包含其他的配置文件

```bash
include /path/to/local.conf
```

可以在同一主机上多个Redis实例之间使用同一份配置文件, 而同时各个实例又拥有自己的特定配置文件

# Redis 数据类型

Redis 比 Memcached 更优秀的地方之一就是支持更丰富的数据类型

Redis 支持七种数据类型

1. string(字符串)；
2. hash(哈希)；
3. list(列表)；
4. set(集合)；
5. zset(sortedset：有序集合)；
6. Bitmaps(位图)；
7. HyperLogLogs(基数统计)；

## String(字符串)

string 是 Redis 最基本的数据类型，一个 key 对应一个 value

string 类型是二进制安全的

Redis 的 string 可以包含任何数据，比如 jpg 图片或者序列化的对象

string 类型的一个键最大能存储 512 MB 数据

```bash
127.0.0.1:6379> set name "zhangsan"
OK
127.0.0.1:6379> get name
"zhangsan"
```

上面的范例中我们使用了 Redis 的 SET 和 GET 命令

## Hash(哈希)

Redis Hash 是一个键名对集合

Redis Hash 是一个 string 类型的 field 和 value 的映射表

Redis Hash 特别适合用于存储对象

Redis 每个 hash 可以存储 232-1 键值对（40多亿）

```bash
127.0.0.1:6379> hmset user:1 username wangwu password 123456 points 200
OK
127.0.0.1:6379> hgetall user:1
1) "username"
2) "wangwu"
3) "password"
4) "123456"
5) "points"
6) "200"
```

上面的范例中hash数据类型存储了包含用户脚本信息的用户对象
范例中我们使用了Redis HMSET, HGETALL命令, user:1为键

## List(列表)

Redis List ( 列表 ) 是简单的字符串列表，按照插入顺序排序

我们可以添加一个元素到列表的头部 ( 左边 ) 或者尾部 ( 右边 )

Redis List( 列表 ) 最多可存储 232- 1 元素 (4294967295, 每个列表可存储40多亿)

```bash
127.0.0.1:6379> lpush database redis
(integer) 1
127.0.0.1:6379> lpush database mongodb
(integer) 2
127.0.0.1:6379> lpush database rabbitmq
(integer) 3
127.0.0.1:6379> lrange database 0 10
1) "rabbitmq"
2) "mongodb"
3) "redis"
127.0.0.1:6379>
```

## Set(集合)

Redis Set 是 string 类型的无序集合

Redis Set 是通过哈希表实现的，所以添加，删除，查找的时间复杂度都是 O(1)

Redis Set 最大的成员数为 232- 1(4294967295, 每个集合可存储40多亿个成员)

Redis Set 内元素具有唯一性，不管插入多少次都只会有一份

### sadd命令

Redis sadd 添加一个 string 元素到 key 对应的 set 集合

语法:

```bash
sadd key member
```

范例:

```bash
127.0.0.1:6379> sadd users zhangsan
(integer) 1
127.0.0.1:6379> sadd users wangwu
(integer) 1
127.0.0.1:6379> sadd users lisi
(integer) 1
127.0.0.1:6379> sadd users lisi
(integer) 0
127.0.0.1:6379> smembers users
1) "lisi"
2) "wangwu"
3) "zhangsan"
```

上面的范例, lisi添加了两次, 但最后只存储了一份

### zset(sorted set: 有序集合)

Redis zset 和 set 一样也是 string 类型元素的集合

Redis zset 不同的是每个元素都会关联一个 double 类型的分数

Redis zset 通过分数来为集合中的成员进行从小到大的排序

Redis zset 的成员是唯一的，但分数( score ) 却可以重复

Redis zset添加元素到集合, 如果元素在集合中存在则更新对应score

语法:

```bash
zadd key score member
```

示例:

```bash
127.0.0.1:6379> zadd long_rank 0 redis
(integer) 1
127.0.0.1:6379> zadd long_rank 0 mongodb
(integer) 1
127.0.0.1:6379> zadd long_rank 0 rabitmq
(integer) 1
127.0.0.1:6379> zadd long_rank 0 r
(integer) 1
127.0.0.1:6379> zadd long_rank 0 r
(integer) 0
127.0.0.1:6379> ZRANGEBYSCORE long_rank 0 100
1) "mongodb"
2) "r"
3) "rabitmq"
4) "redis"
```

## REdis Bitmap(位图)

Redis Bitmap 通过类似 map 结构存放 0 或 1 ( bit 位 ) 作为值

Redis Bitmap 可以用来统计状态，如 日活，是否浏览过某个东西

### Redis setbit 命令

Redis setbit 命令用于设置或者清除一个 bit 位

### Redis setbit 命令语法格式

```bash
SETBIT key offset value
```

### 范例

```bash
127、0.0.1:6379> setbit aaa:001 10001 1 # 返回操作之前的数值
(integer) 0
127、0.0.1:6379> setbit aaa:001 10002 2 # 如果值不是0或1就报错
(error) ERR bit is not an integer or out of range
127、0.0.1:6379> setbit aaa:001 10002 0
(integer) 0
127、0.0.1:6379> setbit aaa:001 10003 1
(integer) 0
```

## HyperLogLogs(基数统计)

Redis HyperLogLog 可以接受多个元素作为输入，并给出输入元素的基数估算值

- 基数

集合中不同元素的数量，比如 {’apple’, ‘banana’, ‘cherry’, ‘banana’, ‘apple’} 的基数就是 3

- 估算值

算法给出的基数并不是精确的，可能会比实际稍微多一些或者稍微少一些，但会控制在合 理的范围之内

HyperLogLog 的优点是

即使输入元素的数量或者体积非常非常大，计算基数所需的空间总是固定的、并且是很小的

在Redis 里面，每个 HyperLogLog 键只需要花费 12 KB 内存，就可以计算接近 2^64 个不同元素的基数

这和计算基数时，元素越多耗费内存就越多的集合形成鲜明对比

因为HyperLogLog 只会根据输入元素来计算基数，而不会储存输入元素本身，所以 HyperLogLog 不能像集合那样，返回输入的各个元素

## Redis PFADD 命令

Redis PFADD 命令将元素添加至 HyperLogLog

### Redis PFADD 命令语法格式

PFADD key element [element ...]

### 范例

```bash
127、0.0.1:6379> PFADD unique::ip::counter '192.168.0.1'
(integer) 1
127、0.0.1:6379> PFADD unique::ip::counter '127.0.0.1'
(integer) 1
127、0.0.1:6379> PFADD unique::ip::counter '255.255.255.255'
(integer) 1
127、0.0.1:6379> PFCOUNT unique::ip::counter
(integer) 3
```

# Redis 命令

## 启动redis-cli客户端

```bash
redis-cli
```

## 示例

```bash
$ redis-cli
127、0.0.1:6379>
127、0.0.1:6379> PING
PONG
```

PING命令用于检测Redis服务是否启动

## 使用redis-cli在远程Redis服务上执行命令

使用`redis-cli`也可以在远程Redis服务上执行命令

### 启动远程redis-cli语法

```bash
$ redis-cli -h host -p port -a password
```

下面的示例演示了如何连接到主机为192.168.1.100,端口为6379,密码为123456的Redis服务上

```bash
$ redis-cli -h 192.168.1.100 -p 6379 -a "123456"
192、168.1.100>
192、168.1.100> PING
PONG
```

# Redis键(key)命令

Redis键相关的命令用于管理redis的键

## Redis键命令语法

```bash
127、0.0.1:6379> COMMAND KEY_NAME
```

## 范例

```bash
127.0.0.1:6379> set site baidu.com
OK
127.0.0.1:6379> del site
(integer) 1
```

`DEl`是一个命令, 用来删除一个键site
如果键被删除成功, 命令执行后输出(integer) 1,否则将输出(integer) 0

## Redis keys命令

下面市Redis键相关的命令

| 命令      | 描述                                                  |
| --------- | ----------------------------------------------------- |
| DEL       | 用于删除 key                                          |
| DUMP      | 序列化给定 key ，并返回被序列化的值                   |
| EXISTS    | 检查给定 key 是否存在                                 |
| EXPIRE    | 为给定 key 设置过期时间                               |
| EXPIREAT  | 用于为 key 设置过期时间，接受的时间参数是 UNIX 时间戳 |
| PEXPIRE   | 设置 key 的过期时间，以毫秒计                         |
| PEXPIREAT | 设置 key 过期时间的时间戳 (unix timestamp)，以毫秒计  |
| KEYS      | 查找所有符合给定模式的 key                            |
| MOVE      | 将当前数据库的 key 移动到给定的数据库中               |
| PERSIST   | 移除 key 的过期时间，key 将持久保持                   |
| PTTL      | 以毫秒为单位返回 key 的剩余的过期时间                 |
| TTL       | 以秒为单位，返回给定 key 的剩余生存时间               |
| RANDOMKEY | 从当前数据库中随机返回一个 key                        |
| RENAME    | 修改 key 的名称                                       |
| RENAMENX  | 仅当 newkey 不存在时，将 key 改名为 newkey            |
| TYPE      | 返回 key 所储存的值的类型                             |

更多命令请参考：https://redis.io/commands

# Redis字符串(String)命令

Redis字符串数据类型的相关命令用于管理Redis字符串值

## Redis字符串命令语法

```bash
127、0.0.1:6379> COMMAND KEY_NAME
```

## 范例

```bash
127、0.0.1:6379> set name zhangsan
OK
127、0.0.1:6379> get name
"zhangsan"
```

`SET`命令用于设置指定key的值
`GET`命令用于获取指定key的值

## Redis字符串命令

| 命令        | 描述                                                        |
| ----------- | ----------------------------------------------------------- |
| SET         | 设置指定 key 的值                                           |
| GET         | 获取指定 key 的值                                           |
| GETRANGE    | 返回 key 中字符串值的子字符                                 |
| GETSET      | 将给定 key 的值设为 value ，并返回 key 的旧值 ( old value ) |
| GETBIT      | 对 key 所储存的字符串值，获取指定偏移量上的位 ( bit )       |
| MGET        | 获取所有(一个或多个)给定 key 的值                           |
| SETBIT      | 对 key 所储存的字符串值，设置或清除指定偏移量上的位(bit)    |
| SETEX       | 设置 key 的值为 value 同时将过期时间设为 seconds            |
| SETNX       | 只有在 key 不存在时设置 key 的值                            |
| SETRANGE    | 从偏移量 offset 开始用 value 覆写给定 key 所储存的字符串值  |
| STRLEN      | 返回 key 所储存的字符串值的长度                             |
| MSET        | 同时设置一个或多个 key-value 对                             |
| MSETNX      | 同时设置一个或多个 key-value 对                             |
| PSETEX      | 以毫秒为单位设置 key 的生存时间                             |
| INCR        | 将 key 中储存的数字值增一                                   |
| INCRBY      | 将 key 所储存的值加上给定的增量值 ( increment )             |
| INCRBYFLOAT | 将 key 所储存的值加上给定的浮点增量值 ( increment )         |
| DECR        | 将 key 中储存的数字值减一                                   |
| DECRBY      | 将 key 所储存的值减去给定的减量值 ( decrement )             |
| APPEND      | 将 value 追加到 key 原来的值的末尾                          |

# Redis 哈希(Hash)命令

Redis hash 是一个string类型的field和vlaue的映射表

Redis hash特别适合用于存储对象

Redis 中每个hash可以存储40多亿键值对

## 示例

```bash
127、0.0.1:6379> HMSET company:qq name "腾讯" url "http://www.qq.com" rank 1 visitors 230000000
OK
127、0.0.1:6379> HGETALL company:qq
1) "name"
2) "\xe8\x85\xbe\xe8\xae\xaf"
3) "url"
4) "http://www.qq.com"
5) "rank"
6) "1"
7) "visitors"
8) "230000000"
```

## Redis hash命令

| 命令         | 描述                                                     |
| ------------ | -------------------------------------------------------- |
| HDEL         | 删除一个或多个哈希表字段                                 |
| HEXISTS      | 查看哈希表 key 中，指定的字段是否存在                    |
| HGET         | 获取存储在哈希表中指定字段的值                           |
| HGETALL      | 获取在哈希表中指定 key 的所有字段和值                    |
| HINCRBY      | 为哈希表 key 中的指定字段的整数值加上增量 increment      |
| HINCRBYFLOAT | 为哈希表 key 中的指定字段的浮点数值加上增量 increment    |
| HKEYS        | 获取所有哈希表中的字段                                   |
| HLEN         | 获取哈希表中字段的数量                                   |
| HMGET        | 获取所有给定字段的值                                     |
| HMSET        | 同时将多个 field-value (域-值)对设置到哈希表 key 中      |
| HSET         | 将哈希表 key 中的字段 field 的值设为 value               |
| HSETNX       | 只有在字段 field 不存在时，设置哈希表字段的值            |
| HVALS        | 获取哈希表中所有值                                       |
| HSCAN        | 迭代哈希表中的键值对                                     |
| HSTRLEN      | 返回哈希表 key 中，与给定域 field 相关联的值的字符串长度 |

# Redis列表(List)命令

Redis List(列表) 是简单的字符串列表，按照插入顺序排序

可以添加一个元素到 Redis 列表的头部（左边）或者尾部（右边）

Redis 一个列表最多可以包含 232- 1 个元素 (4294967295)

## 范例

```bash
127.0.0.1:6379> lpush language Java
(integer) 1
127.0.0.1:6379> lpush language Python
(integer) 2
127.0.0.1:6379> lpush language Ruby
(integer) 3
127.0.0.1:6379> lpush language C++
(integer) 4
127.0.0.1:6379> lrange language  0 2
1) "C++"
2) "Ruby"
3) "Python"
127.0.0.1:6379> lrange language  0 4
1) "C++"
2) "Ruby"
3) "Python"
4) "Java"
```

## Redis列表命令

| 命令       | 描述                                                     |
| ---------- | -------------------------------------------------------- |
| BLPOP      | 移出并获取列表的第一个元素                               |
| BRPOP      | 移出并获取列表的最后一个元素                             |
| BRPOPLPUSH | 从列表中弹出一个值，并将该值插入到另外一个列表中并返回它 |
| LINDEX     | 通过索引获取列表中的元素                                 |
| LINSERT    | 在列表的元素前或者后插入元素                             |
| LLEN       | 获取列表长度                                             |
| LPOP       | 移出并获取列表的第一个元素                               |
| LPUSH      | 将一个或多个值插入到列表头部                             |
| LPUSHX     | 将一个值插入到已存在的列表头部                           |
| LRANGE     | 获取列表指定范围内的元素                                 |
| LREM       | 移除列表元素                                             |
| LSET       | 通过索引设置列表元素的值                                 |
| LTRIM      | 对一个列表进行修剪(trim)                                 |
| RPOP       | 移除并获取列表最后一个元素                               |
| RPOPLPUSH  | 移除列表的最后一个元素，并将该元素添加到另一个列表并返回 |
| RPUSH      | 在列表中添加一个或多个值                                 |
| RPUSHX     | 为已存在的列表添加值                                     |

# Redis集合(Set)命令

Redis Set是 string 类型的无序集合

Redis set 集合成员是唯一的，这就意味着集合中不能出现重复的数据

Redis set 是通过哈希表实现的，所以添加，删除，查找的复杂度都是 O(1)

Redis set 最大的成员数量为 232 – 1(4294967295)

## 示例

```bash
127、0.0.1:6379> SADD language PHP
(integer) 1
127、0.0.1:6379> SADD language Python
(integer) 1
127、0.0.1:6379> SADD language Perl
(integer) 1
127、0.0.1:6379> SADD language Python
(integer) 0
127、0.0.1:6379> SMEMBERS language

1) "Perl"
2) "Python"
3) "PHP"
```

## Redis集合命令

| 命令        | 描述                                                |
| ----------- | --------------------------------------------------- |
| SADD        | 向集合添加一个或多个成员                            |
| SCARD       | 获取集合的成员数                                    |
| SDIFF       | 返回给定所有集合的差集                              |
| SDIFFSTORE  | 返回给定所有集合的差集并存储在 destination 中       |
| SINTER      | 返回给定所有集合的交集                              |
| SINTERSTORE | 返回给定所有集合的交集并存储在 destination 中       |
| SISMEMBER   | 判断 member 元素是否是集合 key 的成员               |
| SMEMBERS    | 返回集合中的所有成员                                |
| SMOVE       | 将 member 元素从 source 集合移动到 destination 集合 |
| SPOP        | 移除并返回集合中的一个随机元素                      |
| SRANDMEMBER | 返回集合中一个或多个随机数                          |
| SREM        | 移除集合中一个或多个成员                            |
| SUNION      | 返回所有给定集合的并集                              |
| SUNIONSTORE | 所有给定集合的并集存储在 destination 集合中         |
| SSCAN       | 迭代集合中的元素                                    |

